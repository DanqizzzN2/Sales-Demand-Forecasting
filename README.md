# Sales-Demand-Forecasting

## 🎯 项目目标
构建 SKU × Sales Office 级别的预测模型，预测未来 6 个月的 PC（订单量）。  
目标预测区间为：**2025.02 ~ 2025.07**  
最后可用历史数据截至：**2025.01**

---

## ✅ Step 1：数据准备与特征工程

- **数据粒度：** SKU × Sales Office × Month
- **时间特征：**
  - Year, Month, Quarter, Day of Year, 是否旺季（如 Q3）
- **滞后特征：**
  - `Lag_1`, `Lag_2`, `Lag_3`（过去 3 个月的 PC）
- **业务特征：**
  - 品牌、产品线、促销强度（`promo_strength`）、客户类型（是否 National Account）
- **统计类特征（可选）：**
  - 滑动均值（Rolling Mean）、同比、环比等

---

## ✅ Step 2：模型训练（按 Sales Office 建模）

### 📌 2.1 数据切分
- **训练集：** 起始至 2024.09（或 2024.10）
- **验证集：** 2024.10 ~ 2025.01（3~4 个月）

### ⚙️ 2.2 模型训练
- 使用 `XGBoost Regressor`，目标函数：`reg:squarederror`
- 调参方式：
  - `GridSearchCV` 或 `Optuna`
  - 每个 Sales Office 单独建模和调参
- 保存最终模型用于部署

### 📊 2.3 模型评估指标
- **MAPE**（安全写法，避免除以零）
- **RMSE**
- **R²**
- **Forecast Accuracy**（误差在 ±20% 内的预测命中率）

---

## ✅ Step 3：滚动预测机制（Rolling Forecast）

### 🔁 预测逻辑（每月逐步推理）：

| 预测月份 | 滞后特征输入                              | 来源类型     |
|----------|--------------------------------------------|--------------|
| 2025.02  | Lag_1=2025.01, Lag_2=2024.12, Lag_3=2024.11 | 真实历史数据 |
| 2025.03  | Lag_1=2025.02（预测）, Lag_2=2025.01, Lag_3=2024.12 | 混合         |
| 2025.04  | Lag_1=2025.03（预测）, Lag_2=2025.02（预测）, Lag_3=2025.01 | 依次更新     |
| …        | 向前滚动                                   | …            |

- 每预测一个月，将 `y_pred` 填入未来输入中
- 严格保持时间顺序，避免数据泄漏

---

## ✅ Step 4：结果输出与应用

- 输出格式：

```text
Sales Office | SKU | Month | Predicted PC
-------------|-----|--------|--------------
NECO         | A12 | 2025-02 | 123.5
